import{r as c,k as g,j as e,X as h,D as d,_ as v,l as f,$ as j,a0 as p,a1 as b}from"../index.qPuWtL5Z.js";const N=a=>c.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",...a},c.createElement("path",{fillRule:"evenodd",d:"M10 8.586l4.95-4.95a1 1 0 111.414 1.414L11.414 10l4.95 4.95a1 1 0 11-1.414 1.414L10 11.414l-4.95 4.95a1 1 0 11-1.414-1.414L8.586 10 3.636 5.05a1 1 0 011.414-1.414L10 8.586z",clipRule:"evenodd"})),w=a=>c.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",...a},c.createElement("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"}));function m(a,t,s,r="dlg-custom"){return new Promise(n=>{g(a,{title:t,width:"400px",footer:s?e.jsx("div",{className:"flex w-full justify-end gap-3 items-end",children:s==null?void 0:s(()=>{n(!0),h()},()=>{n(!1),h()})}):void 0,dialogId:r})})}function y(a,t,s){return t||(t="Info"),m(a,t,n=>e.jsx(d,{waitFor:s==null?void 0:s.waitFor,variant:"info",label:(s==null?void 0:s.acceptLabel)||"Ok",onClick:n}),"dlg-alert")}function C(a,t,s){return t||(t="Confirm delete"),m(a,t,(n,u)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{type:"outlined",size:"sm",label:"Cancel",onClick:u}),e.jsx(d,{variant:"danger",size:"sm",label:"Delete",onClick:n,waitFor:s==null?void 0:s.waitFor})]}),"dlg-delete")}function S(a,t){return t||(t="Confirm"),m(a,t,(r,n)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{type:"outlined",size:"sm",label:"No",onClick:n}),e.jsx(d,{variant:"success",size:"sm",label:"Yes",onClick:r})]}),"dlg-yesNo")}function k(a,t){return t||(t="Confirm"),m(a,t,(r,n)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{type:"outlined",size:"sm",label:"Cancel",onClick:n}),e.jsx(d,{variant:"success",size:"sm",label:"Ok",onClick:r})]}),"dlg-okCancel")}const D={show:m,alert:y,yesNo:S,okCancel:k,confirmDelete:C};function A(){const[a,t]=c.useState(),s=v(),[r,n]=c.useState({});c.useEffect(()=>{(async function(){const{$integration:l}=f("IntegrationService"),i=await l.toArray();if(i.length)t(i);else{s("/integrate");return}const o={};i.forEach(x=>{o[x.id]=!0}),n(o)})()},[]);const u=async l=>{if(await D.confirmDelete(`Are you sure to delete integration "${l.name}" permanently?`,"Confirm Delete")){const{$integration:o}=f("IntegrationService");await o.delete(l.id);const x=await o.toArray();x.length?t(x):s("/integrate")}};return a?e.jsx("div",{className:"min-h-full flex flex-col items-center bg-gray-100 p-4",children:e.jsxs("div",{className:"w-full max-w-6xl",children:[e.jsx("h2",{className:"text-xl font-bold text-center mb-6",children:"Integrations"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(l=>{const i=j[l.type],o=r[l.id]!==void 0?r[l.id]?e.jsx("span",{className:"text-green-500 text-xs font-semibold",children:"Active"}):e.jsx("span",{className:"text-red-500 text-xs font-semibold",children:"Signed Out"}):null;return e.jsxs(p,{to:`/${l.id}`,className:"bg-white shadow-lg rounded-lg p-6 transform transition-transform hover:scale-105 cursor-pointer relative w-full md:max-w-md",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 rounded-full",children:i&&e.jsx(i.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:i?i.label:l.type}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[l.authType==="BASIC"&&e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Basic Auth"}),l.authType==="SESSION"&&e.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Session Auth"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-indigo-600 hover:underline text-sm",children:l.url})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 pt-4",children:[o&&e.jsx("div",{className:"text-sm text-gray-600",children:o}),e.jsx("button",{onClick:b(()=>u(l)),"aria-label":"Delete Integration",className:"text-red-500 hover:text-red-700 transition",children:e.jsx(N,{className:"w-5 h-5 text-red-500 hover:text-red-700 cursor-pointer"})})]})]},l.id)}),e.jsxs(p,{to:"/integrate",className:"bg-white border-4 border-dashed border-gray-300 rounded-lg shadow-lg flex flex-col items-center p-6 transition-transform transform hover:scale-105 hover:shadow-xl cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center p-2 bg-blue-100 rounded-full",children:e.jsx(w,{className:"w-10 h-10 text-blue-600"})}),e.jsx("span",{className:"mt-4 text-blue-600 text-lg font-semibold",children:"Add New Integration"})]})]})]})}):null}export{A as default};
