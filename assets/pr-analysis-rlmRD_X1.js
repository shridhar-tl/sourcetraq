import{r as u,o as X,p as Z,j as e,c as f,S as z,q as J,R as Q,f as q,L as ee,t as te,u as se,v as le,h as E,B as ae,w as re,n as T}from"../index.f7nfUctD.js";import{f as ne,g as _,t as R,h as H,b as oe,c as $}from"./chart-options-mACXGUK2.js";const Le=t=>u.createElement("svg",{width:"28px",height:"28px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},u.createElement("path",{d:"M22 7v1h-5v5h-1V8h-5V7h5V2h1v5zm-9.5 8a3.494 3.494 0 0 0-3.45 3h-.8l.001-.003V18H6.95A2.502 2.502 0 0 0 5 16.05v-4.1a2.477 2.477 0 0 0 1.002-.463L8.338 14H7v1h3v-3H9v1.243l-2.336-2.512A2.473 2.473 0 0 0 7 9.5a2.5 2.5 0 1 0-3 2.45v4.1A2.5 2.5 0 1 0 6.95 19h1.3l.001.002V19h.8a3.493 3.493 0 1 0 3.449-4zM3 9.5A1.5 1.5 0 1 1 4.5 11 1.502 1.502 0 0 1 3 9.5zM4.5 20A1.5 1.5 0 1 1 6 18.5 1.502 1.502 0 0 1 4.5 20zm8 1a2.5 2.5 0 1 1 2.5-2.5 2.502 2.502 0 0 1-2.5 2.5zm1.5-2.5a1.5 1.5 0 1 0-1.5 1.5 1.502 1.502 0 0 0 1.5-1.5z"}),u.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}));function ie(t,r){const[s,a]=X(t,r.start,r.end);return{start:s,end:a}}function de(t,r){const{start:s,end:a}=ie(r==null?void 0:r.in,t);let l=+s>+a;const d=l?+s:+a,n=l?a:s;n.setHours(0,0,0,0);let o=1;const i=[];for(;+n<=d;)i.push(Z(s,n)),n.setDate(n.getDate()+o),n.setHours(0,0,0,0);return l?i.reverse():i}function ce({rows:t=5,columns:r=8,className:s,headerRowClassName:a,headerCellClassName:l,dataRowClassName:d,dataCellClassName:n,...o}){const i=Array.from({length:r}),x=Array.from({length:t}),p={gridTemplateColumns:`repeat(${r}, minmax(0, 1fr))`};return e.jsxs("div",{className:f("w-full bg-white",s),...o,children:[e.jsx("div",{className:f("grid border-b border-gray-300",a),style:p,children:i.map((v,h)=>e.jsx("div",{className:f("px-3 py-2 pe-9",l),children:e.jsx(z,{className:"h-4 w-full rounded",level:3})},h))}),x.map((v,h)=>e.jsx("div",{className:f("grid","border-b","border-gray-200","last:border-0",d),style:p,children:i.map((N,y)=>e.jsx("div",{className:f("px-3 py-3.5",n),children:e.jsx(z,{className:"h-3 w-full rounded"})},y))},h))]})}const me=({columns:t,rows:r,noRowsMessage:s,onRowClick:a})=>e.jsx("tbody",{children:r.length===0?e.jsx("tr",{className:"border-b border-gray-200",children:e.jsx("td",{className:"px-4 py-2 text-center",colSpan:t.length,children:s||"No records found."})}):r.map((l,d)=>e.jsx("tr",{className:f("border-b border-gray-200 hover:bg-gray-50",a?"cursor-pointer":""),onClick:a?n=>a({row:l,index:d,event:n}):void 0,children:t.map((n,o)=>{const i=n.template?n.template(l):J(l,n.field),x=typeof i=="string"||typeof i=="number"?i:"";return e.jsx("td",{className:f("text-sm px-4 py-2 truncate text-ellipsis",{hidden:!!n.hideBelow,"xs:table-cell":n.hideBelow==="xs","sm:table-cell":n.hideBelow==="sm","md:table-cell":n.hideBelow==="md","mlg:table-cell":n.hideBelow==="mlg","lg:table-cell":n.hideBelow==="lg","xl:table-cell":n.hideBelow==="xl","2xl:table-cell":n.hideBelow==="2xl","3xl:table-cell":n.hideBelow==="3xl"},n.cellClassName),title:x.toString(),children:i},o)})},d))});function ue({label:t,iconLeft:r,iconRight:s,children:a,className:l,...d}){const n=e.jsxs(e.Fragment,{children:[!!r&&e.jsx(r,{className:"absolute left-2 top-1/2 transform -translate-y-1/2"}),a,!!s&&e.jsx(s,{className:"absolute right-2 top-1/2 transform -translate-y-1/2"})]});return e.jsxs("div",{className:f("relative w-full ",l,{"border border-gray-300 rounded min-h-[30px] pt-[1px]":!t,"rounded-[8px] min-h-[55px]":!!t}),...d,children:[!t&&n,!!t&&e.jsxs("fieldset",{className:"relative border rounded-[8px] h-full w-full bg-white",children:[e.jsx("legend",{className:"text-labelBlue font-bold text-13px ms-3 px-1",children:t}),n]})]})}function xe({label:t,placeholder:r="Choose here...",options:s=[],showFilter:a=s.length>10,showClear:l=!0,onChange:d,value:n,className:o}){const[i,x]=u.useState(!1),[p,v]=u.useState(""),[h,N]=u.useState(-1),[y,S]=u.useState(null),b=u.useRef(null),j=u.useRef(null),w=u.useRef(null),C=p?s.filter(c=>c.label.toString().toLowerCase().includes(p.toLowerCase())):s,g=s.find(c=>c.value===n),k=()=>x(c=>!c),D=()=>{x(!1),v(""),N(-1)},B=c=>{d(c.value),D()},L=c=>{c.stopPropagation(),d(null)},M=()=>{if(b.current){const c=b.current.getBoundingClientRect(),m=200,A=window.innerHeight-c.bottom,U=c.top,P=A<m&&U>m,K=window.innerWidth<=640?window.innerWidth*.9:c.width,Y=window.innerWidth<=640?window.innerHeight*.8:P?U:A;S({top:P?c.top-(P?m:0)+window.scrollY:c.bottom+window.scrollY,left:window.innerWidth<=640?window.innerWidth*.05:c.left+window.scrollX,maxHeight:Y,width:K,dropUp:P})}};u.useEffect(()=>{const c=m=>{b.current&&!b.current.contains(m.target)&&j.current&&!j.current.contains(m.target)&&D()};return i?(document.addEventListener("mousedown",c),M(),N(-1)):(document.removeEventListener("mousedown",c),v("")),()=>{document.removeEventListener("mousedown",c)}},[i]),u.useEffect(()=>{const c=()=>{i&&M()};return window.addEventListener("resize",c),window.addEventListener("scroll",c,!0),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c,!0)}},[i]),u.useEffect(()=>{i&&w.current&&w.current.focus()},[i,a]),u.useEffect(()=>{if(h>=0&&j.current){const m=j.current.children[h];m&&m.scrollIntoView({block:"nearest"})}},[h]);const V=c=>{if(!i){(c.key==="ArrowDown"||c.key==="Enter")&&(x(!0),c.preventDefault());return}switch(c.key){case"ArrowDown":N(m=>Math.min(m+1,C.length-1)),c.preventDefault();break;case"ArrowUp":N(m=>Math.max(m-1,0)),c.preventDefault();break;case"Enter":h>=0&&h<C.length&&B(C[h]),c.preventDefault();break;case"Escape":D(),c.preventDefault();break}},F=e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:b,className:f("h-full flex items-center justify-between cursor-pointer mt-[-4px]",o),onClick:k,onKeyDown:V,tabIndex:0,"aria-haspopup":"listbox","aria-expanded":i,children:[e.jsx("span",{className:f("flex-1 px-4 text-sm",g?"text-black":"text-pBlack"),children:g?g.label:r}),l&&!!n&&e.jsx("button",{onClick:L,className:"ml-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Clear selection",children:"×"}),e.jsx("div",{className:"w-0 h-0 me-3 border-t-[6px] border-b-0 border-l-[3.5px] border-r-[3.5px] border-transparent border-t-labelBlue"})]}),i&&y&&Q.createPortal(e.jsxs("div",{className:f("absolute z-50 bg-white border border-gray-300 rounded shadow-lg",window.innerWidth<=640?"fixed top-0 left-0 right-0 bottom-0 m-auto":""),style:{top:window.innerWidth<=640?"10%":y.top,left:window.innerWidth<=640?"5%":y.left,width:window.innerWidth<=640?"90%":y.width,maxHeight:window.innerWidth<=640?"80%":y.maxHeight,overflow:"auto"},role:"listbox","aria-activedescendant":h>=0?`selectbox-option-${h}`:void 0,children:[a&&e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{ref:w,type:"text",value:p,onChange:c=>v(c.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring bg-white",placeholder:"Filter...",onKeyDown:c=>c.stopPropagation(),"aria-label":"Filter options"})}),e.jsx("div",{className:"max-h-60 overflow-auto",ref:j,role:"presentation",children:C.length>0?C.map((c,m)=>e.jsx("div",{id:`selectbox-option-${m}`,onClick:()=>B(c),onMouseEnter:()=>N(m),className:f("px-4 py-2 cursor-pointer text-black text-xs",(g==null?void 0:g.value)===c.value?"bg-blue-500 text-white":"",h===m?"bg-gray-200":"","border-b border-gray-100 last:border-b-0"),role:"option","aria-selected":(g==null?void 0:g.value)===c.value,children:c.label},c.value)):e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No options found"})})]}),document.body)]});return t?e.jsx(ue,{label:t,children:F}):F}function he({columns:t,rowsCount:r,pageIndex:s,totalPages:a,rowsCounts:l,onChangeCount:d,onNavigate:n}){const o=l.map(i=>({label:i,value:i}));return e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:t.length,children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"Rows per page"}),e.jsx(xe,{className:"border border-gray-300 rounded px-2 py-1",value:r,options:o,showClear:!1,onChange:d})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(1),disabled:s===1,children:"«"}),e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(s-1),disabled:s===1,children:"‹"}),e.jsxs("span",{className:"px-2 text-sm font-medium",children:[s," of ",a||1]}),e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(s+1),disabled:s>=a||!a,children:"›"}),e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(a),disabled:s>=a||!a,children:"»"})]})]})})})})}const fe=({columns:t,sortColumn:r,sortAsc:s,onSort:a})=>e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-300",children:t.map((l,d)=>{const n=l.sortable&&(r==null?void 0:r.field)===l.field;return e.jsxs("th",{title:l.helpText,className:f("px-4 py-2 font-semibold text-sm text-gray-800 select-none",{"cursor-pointer":l.sortable,hidden:!!l.hideBelow,"xs:table-cell":l.hideBelow==="xs","sm:table-cell":l.hideBelow==="sm","md:table-cell":l.hideBelow==="md","mlg:table-cell":l.hideBelow==="mlg","lg:table-cell":l.hideBelow==="lg","xl:table-cell":l.hideBelow==="xl","2xl:table-cell":l.hideBelow==="2xl","3xl:table-cell":l.hideBelow==="3xl"},l.headerClassName),onClick:()=>a(l),children:[l.title,n&&e.jsx("span",{className:"ml-1",children:s?"↓":"↑"})]},d)})})});function pe(t,r,s=!0,a){return u.useMemo(()=>!a||!r||!(t!=null&&t.length)?t:[...t].sort((l,d)=>{const n=l[r],o=d[r];if(I(n)&&I(o))return 0;if(I(n))return s?-1:1;if(I(o))return s?1:-1;let i=0;if(typeof n=="number"&&typeof o=="number")i=n-o;else if(n instanceof Date&&o instanceof Date)i=n.getTime()-o.getTime();else{const x=String(n).toLowerCase(),p=String(o).toLowerCase();x<p?i=-1:x>p?i=1:i=0}return s?i:-i}),[t,r,s,a])}function I(t){return t==null}const be=[10,20,25,50,75,100];function ge({isLoading:t,expectedRows:r,columns:s,rows:a,totalRows:l,page:d,sortColumn:n,sortAsc:o,onSort:i,onChange:x,noRowsMessage:p,rowsPerPage:v,rowCounts:h=be,pagination:N,containerClassName:y,onRowClick:S}){const[b,j]=u.useState(n),[w,C]=u.useState(o??!0),[g,k]=u.useState(d||1),[D,B]=u.useState(v??h[0]),L=Math.ceil(l/D),M=pe(a,b==null?void 0:b.field,w,l===(a==null?void 0:a.length));if(t)return e.jsx(ce,{columns:s==null?void 0:s.length,rows:r});const V=m=>{if(!m.sortable)return;let A=!0;b&&b.field===m.field&&(A=!w),j(m),C(A),i&&i(m,A),x&&x({sortColumn:m,sortAsc:A,count:D,pageNumber:g})},F=m=>{B(m),k(1),x&&x({sortColumn:b||void 0,sortAsc:w,count:m,pageNumber:1})},c=m=>{m<1||m>L||(k(m),x&&x({sortColumn:b||void 0,sortAsc:w,count:D,pageNumber:m}))};return e.jsx("div",{className:f("overflow-auto",y),children:e.jsxs("table",{className:"min-w-full bg-white rounded shadow",children:[e.jsx(fe,{columns:s,sortColumn:b,sortAsc:w,onSort:V}),e.jsx(me,{columns:s,rows:M,noRowsMessage:p,onRowClick:S}),N!==!1&&e.jsx(he,{columns:s,pageIndex:g,rowsCount:D,rowsCounts:h,totalPages:L,onChangeCount:F,onNavigate:c})]})})}function G({pr:t,state:r=t==null?void 0:t.state}){return e.jsx("span",{className:f("px-2 py-1 text-xs rounded text-white",{"bg-green-500":r==="MERGED","bg-red-500":r==="DECLINED","bg-blue-500":r!=="MERGED"&&r!=="DECLINED"}),children:r||"Unknown"})}const Me=[{field:"prId",title:"PR Id",helpText:"Unique id of current PR",headerClassName:f("text-left"),template:t=>t.url?e.jsxs("a",{href:t.url,target:"_blank",className:"cursor-pointer",children:["#",t.prId]}):t.prId},{field:"title",title:"Title",cellClassName:f("max-w-[500px]"),headerClassName:f("max-w-[500px] text-left")},{field:"state",title:"State",sortable:!0,helpText:"The current state of the PR",cellClassName:"text-center",headerClassName:"text-center",template:t=>e.jsx(G,{pr:t})},{field:"created",title:"Created",sortable:!0,helpText:"Date when this PR was created",cellClassName:"text-center",headerClassName:"text-center",template:t=>q(t.created)},{field:"closed",title:"Closed",sortable:!0,helpText:"Date when this PR was Closed / Declined",cellClassName:"text-center",headerClassName:"text-center",template:t=>t.closed?q(t.closed):null},{field:"daysOpen",title:"Age",sortable:!0,helpText:"Number of days the PR was open before either it is merged or declined",cellClassName:"text-center",headerClassName:"text-center"},{field:"daysFromFirstCommitToCreation",title:"Lag",sortable:!0,helpText:"Number of days it took for the user to raise PR after the first commit was created",cellClassName:"text-center",headerClassName:"text-center"},{field:"daysFromCreationToApproval",title:"Approval Lag",sortable:!0,helpText:"Number of days it took to get the Approval",cellClassName:"text-center",headerClassName:"text-center"},{field:"reviewerCount",title:"Reviewers",sortable:!0,helpText:"Number of reviewers added to PR",cellClassName:"text-center",headerClassName:"text-center"},{field:"reviewersApproved",title:"Approvals",sortable:!0,helpText:"Number of reviewers approving the PR",cellClassName:"text-center",headerClassName:"text-center"},{field:"commentCount",title:"Comments",sortable:!0,helpText:"Number of comments in the PR. This includes responses to comments as well",cellClassName:"text-center",headerClassName:"text-center"},{field:"daysFromCreationToFirstActivity",title:"Activity Lag",sortable:!0,helpText:"Number of days it took for first activity to happen in the PR.",cellClassName:"text-center",headerClassName:"text-center"}];function ve({href:t,newTab:r,children:s,...a}){return r!==!1?(a.target="_blank",a.rel="noreferrer",e.jsx("a",{href:t,...a,onClick:we,children:s})):e.jsx(ee,{to:t,...a,children:s})}function we(t){t.stopPropagation()}function ye({legendsCount:t,legendPosition:r,doughnut:s,containerClassName:a}){const l=!!t&&e.jsx(ne,{count:t,position:r}),d=r=="top"||r==="bottom";return e.jsxs("div",{className:f("flex justify-center",{"flex-col gap-5":d,"gap-3":!d},a),children:[(r=="top"||r==="left")&&l,e.jsx("div",{className:"size-[360px] rounded-full",children:e.jsx(z,{className:"h-full rounded-full",children:!!s&&e.jsx("div",{className:"absolute inset-0 rounded-full m-auto size-[200px] bg-white"})})}),(r=="right"||r==="bottom")&&l]})}const Ne=[{field:"date",title:"Date",sortable:!0,headerClassName:"text-left",cellClassName:"text-left"},{field:"comments",title:"Comments",sortable:!0,headerClassName:"text-center",cellClassName:"text-center"},{field:"approvals",title:"Approvals",sortable:!0,headerClassName:"text-center",cellClassName:"text-center"},{field:"rescoped",title:"Commits",sortable:!0,headerClassName:"text-center",cellClassName:"text-center"}];async function Ce(t){const{$repository:r}=te("RepositoryService"),{project:s,repository:a}=se.getState(),l=t.activities||await r.getPullRequestActivity(s==null?void 0:s.key,a==null?void 0:a.slug,t.id),d=je(l,t),n=Ae(d),o=Ee(l),i=Re(l,d,t);return{stackedChart:n,reviewerChart:o,metrics:i,dailyMetrics:d.dailyData}}function je(t,r){const s=De(t,r),a=le(Object.keys(s));let l=0;const d=a.map(o=>{const i=s[o],x=i.filter(h=>h.action==="COMMENTED").length,p=i.filter(h=>h.action==="APPROVED").length,v=i.filter(h=>h.action==="RESCOPED").length;return l+=x,{date:o,comments:x,rescoped:v,approvals:p}});let n=0;return a.length&&(n=Object.values(s).filter(o=>!o.length).length),{labels:a,dailyData:d,totalComments:l,idleDays:n}}function De(t,r){const{createdDate:s,closedDate:a}=r,l=de({start:s,end:a||new Date}).reduce((d,n)=>(d[H(n,"yyyy-MM-dd")]=[],d),{});return t.reduce((d,n)=>{const o=H(n.createdDate,"yyyy-MM-dd");return d[o]||(d[o]=[]),d[o].push(n),d},l)}function Ae(t){const r=t.labels,s=t.dailyData.map(o=>o.comments),a=t.dailyData.map(o=>o.approvals),l=t.dailyData.map(o=>o.rescoped),d={labels:r,datasets:[s.some(o=>!!o)&&{type:"bar",label:"Comments",data:s,backgroundColor:"#007BFF",stack:"Activity"},a.some(o=>!!o)&&{type:"bar",label:"Approvals",data:a,backgroundColor:"#4CAF50",stack:"Activity"},l.some(o=>!!o)&&{type:"bar",label:"Commits",data:l,backgroundColor:"#FF9800",stack:"Activity"}].filter(Boolean)},n={..._(),plugins:{tooltip:{mode:"index",intersect:!1},legend:{display:!0}},scales:{x:{stacked:!0},y:{stacked:!0,title:{display:!1,text:"Count"},ticks:{beginAtZero:!0}}}};return{data:d,options:n}}function Ee(t){const r={};t.forEach(o=>{if(o.action==="COMMENTED"&&o.user){const i=o.user.displayName||o.user.name||"Unknown";r[i]=(r[i]||0)+1}});const s=Object.keys(r),a=s.map(o=>r[o]),l=s.map((o,i)=>`hsl(${i*50%360}, 70%, 60%)`),d={labels:s,datasets:[{label:"Comments Count",data:a,backgroundColor:l}]},n={..._(),maintainAspectRatio:!0,plugins:{legend:{position:"right"}}};return{data:d,options:n}}function Re(t,r,s){let a=null,l=null;t.forEach(o=>{o.action==="APPROVED"&&((!a||o.createdDate.getTime()<a.getTime())&&(a=o.createdDate),(!l||o.createdDate.getTime()>l.getTime())&&(l=o.createdDate))});let d="N/A";if(a&&l){const o=E(l,a);o>0&&(d=R(o)+" days")}let n="N/A";if(a){let o=null;s.state!=="MERGED"?o=new Date:o=s.closedDate,o&&(n=R(E(o,a))+" days")}return{idleDays:r.idleDays,daysOpenAfterApproval:n,approvalLag:d,totalComments:r.totalComments}}function ke(t){const[r,s]=u.useState(W());return u.useEffect(()=>{const a=()=>s(W());return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]),u.useEffect(()=>{t&&s(W())},[t]),r}function W(){return Math.random().toString(36).substring(2,9)}function Fe({pr:t,url:r,className:s,onBackClick:a}){const[l,d]=u.useState(null),[n,o]=u.useState(!1),i=u.useRef(null);u.useEffect(()=>{var p;t&&(o(!0),(p=i.current)==null||p.scrollIntoView({behavior:"smooth"}),Ce(t).then(v=>d(v)).finally(()=>o(!1)))},[t]);const x=e.jsxs("div",{className:"p-4 bg-white shadow rounded-lg flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("h3",{className:"text-lg font-bold flex gap-3 cursor-pointer",ref:i,children:[!!a&&e.jsx(ae,{variant:"plain",leftIcon:re,onClick:a}),e.jsxs(ve,{href:r,newTab:!0,children:["#",t.id]}),t.title]})}),e.jsxs("div",{className:"flex flex-col sm:items-end",children:[e.jsxs("p",{className:"text-sm",children:["Created: ",t.createdDate?H(t.createdDate,"PPP"):"N/A"]}),e.jsxs("p",{children:[e.jsx(G,{pr:t}),t.state==="MERGED"&&e.jsxs("span",{className:"text-xs ms-2",children:["(",H(t.closedDate,"PPP"),")"]})]})]})]});return e.jsxs("div",{className:s,children:[x,e.jsxs("div",{className:"animate-fadeIn flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex flex-col flex-1 shadow-lg rounded-lg p-4 bg-white max-h-[440px] lg:max-w-1/2",children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Daily Activity Overview"}),e.jsxs("div",{className:"w-full h-[370px]",children:[n&&e.jsx(oe,{barWidth:80,count:14,legendsCount:4,order:"random",className:"h-[370px]"}),!n&&l&&e.jsx($,{type:"bar",data:l.stackedChart.data,options:l.stackedChart.options,width:"100%",height:370})]})]}),e.jsx(Se,{isLoading:n,data:l==null?void 0:l.reviewerChart})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"bg-white flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 shadow-lg rounded-lg p-4",children:[e.jsx(O,{isLoading:n,className:"bg-green-100",label:"Total Idle Days",value:l==null?void 0:l.metrics.idleDays}),e.jsx(O,{isLoading:n,className:"bg-yellow-100",label:"Days Open After Approval",value:l==null?void 0:l.metrics.daysOpenAfterApproval}),e.jsx(O,{isLoading:n,className:"bg-red-100",label:"Approval Lag (First vs Last)",value:l==null?void 0:l.metrics.approvalLag}),e.jsx(O,{isLoading:n,className:"bg-blue-100",label:"Total Comments",value:l==null?void 0:l.metrics.totalComments})]}),e.jsxs("div",{className:"flex-1 shadow-lg rounded-lg p-4 bg-white max-h-[400px] overflow-auto",children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Daily Metrics Details"}),e.jsx(ge,{isLoading:n,containerClassName:"w-full",columns:Ne,rows:(l==null?void 0:l.dailyMetrics)||[],noRowsMessage:"No details available",totalRows:(l==null?void 0:l.dailyMetrics.length)||0,pagination:!1})]})]})]})]})}function Se({isLoading:t,data:r}){const s=ke(r);return e.jsxs("div",{className:"flex flex-col flex-1 shadow-lg rounded-lg p-4 bg-white max-h-[440px] lg:max-w-1/2",children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Reviewer Wise Comments"}),e.jsxs("div",{className:"w-full h-[370px]",children:[t&&e.jsx(ye,{legendsCount:4,legendPosition:"right",className:"h-[370px]",doughnut:!0}),!t&&r&&e.jsx($,{className:"mx-auto w-full max-h-[370px]",type:"doughnut",data:r.data,options:r.options,height:370},s)]})]})}function O({isLoading:t,className:r,label:s,value:a}){return t?e.jsx(z,{level:1}):e.jsxs("div",{className:f("p-4 bg-green-100 rounded-lg shadow",r),children:[e.jsx("h4",{className:"font-bold",children:s}),e.jsx("p",{className:"text-2xl",children:a})]})}function Pe(t){const r=new Date;return t.map(s=>{var w,C,g;const a=T(s.createdDate),l=T(s.closedDate),d=E(l??r,a),n=R(d),{firstCommitDate:o,firstActivityDate:i,approveDate:x}=s.properties.cycleTime,p=R(E(a,T(o)));let v=0;s.state==="MERGED"&&l&&(v=R(E(l,a)));const h=R(E(T(x),a)),N=R(E(T(i),a)),y=s.reviewers.length,S=s.reviewers.filter(k=>k.approved).length,b=s.properties.commentCount;return{pr:s,prId:s.id,title:s.title,exactDaysOpen:d,daysOpen:n,daysFromFirstCommitToCreation:p,daysFromCreationToMerge:v,daysFromCreationToApproval:h,reviewerCount:y,reviewersApproved:S,commentCount:b,daysFromCreationToFirstActivity:N,state:s.state,created:s.createdDate,closed:s.closedDate,url:(g=(C=(w=s.links)==null?void 0:w.self)==null?void 0:C[0])==null?void 0:g.href}})}export{Fe as P,Le as S,ge as T,Pe as g,Me as p};
