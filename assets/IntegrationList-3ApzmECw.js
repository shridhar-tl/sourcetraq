import{r as d,l as p,j as e,q as h,B as c,t as v,m as g,v as b,w as f,x as j}from"../index.BzN-FJ4R.js";const y=a=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",...a},d.createElement("path",{fillRule:"evenodd",d:"M10 8.586l4.95-4.95a1 1 0 111.414 1.414L11.414 10l4.95 4.95a1 1 0 11-1.414 1.414L10 11.414l-4.95 4.95a1 1 0 11-1.414-1.414L8.586 10 3.636 5.05a1 1 0 011.414-1.414L10 8.586z",clipRule:"evenodd"})),N=a=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",...a},d.createElement("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"}));function x(a,t,s,n="dlg-custom"){return new Promise(l=>{p(a,{title:t,width:"400px",footer:s?e.jsx("div",{className:"flex w-full justify-end gap-3 items-end",children:s==null?void 0:s(()=>{l(!0),h()},()=>{l(!1),h()})}):void 0,dialogId:n})})}function w(a,t,s){return t||(t="Info"),x(a,t,l=>e.jsx(c,{waitFor:s==null?void 0:s.waitFor,variant:"info",label:(s==null?void 0:s.acceptLabel)||"Ok",onClick:l}),"dlg-alert")}function k(a,t,s){return t||(t="Confirm delete"),x(a,t,(l,u)=>e.jsxs(e.Fragment,{children:[e.jsx(c,{type:"outlined",size:"sm",label:"Cancel",onClick:u}),e.jsx(c,{variant:"danger",size:"sm",label:"Delete",onClick:l,waitFor:s==null?void 0:s.waitFor})]}),"dlg-delete")}function C(a,t){return t||(t="Confirm"),x(a,t,(n,l)=>e.jsxs(e.Fragment,{children:[e.jsx(c,{type:"outlined",size:"sm",label:"No",onClick:l}),e.jsx(c,{variant:"success",size:"sm",label:"Yes",onClick:n})]}),"dlg-yesNo")}function S(a,t){return t||(t="Confirm"),x(a,t,(n,l)=>e.jsxs(e.Fragment,{children:[e.jsx(c,{type:"outlined",size:"sm",label:"Cancel",onClick:l}),e.jsx(c,{variant:"success",size:"sm",label:"Ok",onClick:n})]}),"dlg-okCancel")}const D={show:x,alert:w,yesNo:C,okCancel:S,confirmDelete:k};function A(){const[a,t]=d.useState(),s=v(),[n,l]=d.useState({});d.useEffect(()=>{(async function(){const{$integration:r}=g("IntegrationService"),i=await r.toArray();if(i.length)t(i);else{s("/integrate");return}const o={};i.forEach(m=>{o[m.id]=!0}),l(o)})()},[]);const u=async r=>{if(await D.confirmDelete(`Are you sure to delete integration "${r.name}" permanently?`,"Confirm Delete")){const{$integration:o}=g("IntegrationService");await o.delete(r.id);const m=await o.toArray();m.length?t(m):s("/integrate")}};return a?e.jsx("div",{className:"min-h-full flex flex-col items-center bg-gray-100 dark:bg-gray-800 p-4",children:e.jsxs("div",{className:"w-full max-w-6xl",children:[e.jsx("h2",{className:"text-xl font-bold text-center mb-6 dark:text-gray-100",children:"Integrations"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(r=>{const i=b[r.type],o=n[r.id]!==void 0?n[r.id]?e.jsx("span",{className:"text-green-500 text-xs font-semibold",children:"Active"}):e.jsx("span",{className:"text-red-500 text-xs font-semibold",children:"Signed Out"}):null;return e.jsxs(f,{to:`/${r.id}`,className:"bg-white dark:bg-gray-700 shadow-lg rounded-lg p-6 transform transition-transform hover:scale-105 cursor-pointer relative w-full md:max-w-md",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-gray-200 dark:bg-gray-500 rounded-full",children:i&&e.jsx(i.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:i?i.label:r.type}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.authType==="BASIC"&&e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Basic Auth"}),r.authType==="SESSION"&&e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Session Auth"})]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-indigo-600 dark:text-violet-300 hover:underline text-sm",children:r.url})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 pt-4",children:[o&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-200",children:o}),e.jsx("button",{onClick:j(()=>u(r)),"aria-label":"Delete Integration",className:"text-red-500 hover:text-red-700 transition",children:e.jsx(y,{className:"w-5 h-5 text-red-500 hover:text-red-700 cursor-pointer"})})]})]},r.id)}),e.jsxs(f,{to:"/integrate",className:"bg-white dark:bg-gray-700 border-4 border-dashed border-gray-300 dark:border-gray-600 rounded-lg shadow-lg flex flex-col items-center p-6 transition-transform transform hover:scale-105 hover:shadow-xl cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center p-2 bg-blue-100 dark:bg-blue-900 rounded-full",children:e.jsx(N,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"mt-4 text-blue-600 dark:text-blue-400 text-lg font-semibold",children:"Add New Integration"})]})]})]})}):null}export{A as default};
