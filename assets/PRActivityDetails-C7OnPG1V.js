import{r as m,_ as Q,$ as J,j as e,c as h,S as O,Z as M,k as R,a0 as _,a1 as ee,a2 as P,f as $,L as q,m as te,u as se,Q as le,a3 as V,B as ae,A as re}from"../index.BzN25hFh.js";import{t as S,V as ne,U as G,b as oe,c as K}from"./chart-options-DtC3Yyrp.js";const Me=t=>m.createElement("svg",{width:"28px",height:"28px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M22 7v1h-5v5h-1V8h-5V7h5V2h1v5zm-9.5 8a3.494 3.494 0 0 0-3.45 3h-.8l.001-.003V18H6.95A2.502 2.502 0 0 0 5 16.05v-4.1a2.477 2.477 0 0 0 1.002-.463L8.338 14H7v1h3v-3H9v1.243l-2.336-2.512A2.473 2.473 0 0 0 7 9.5a2.5 2.5 0 1 0-3 2.45v4.1A2.5 2.5 0 1 0 6.95 19h1.3l.001.002V19h.8a3.493 3.493 0 1 0 3.449-4zM3 9.5A1.5 1.5 0 1 1 4.5 11 1.502 1.502 0 0 1 3 9.5zM4.5 20A1.5 1.5 0 1 1 6 18.5 1.502 1.502 0 0 1 4.5 20zm8 1a2.5 2.5 0 1 1 2.5-2.5 2.502 2.502 0 0 1-2.5 2.5zm1.5-2.5a1.5 1.5 0 1 0-1.5 1.5 1.502 1.502 0 0 0 1.5-1.5z"}),m.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),ie=t=>m.createElement("svg",{id:"Layer_1",style:{color:"#E21B1B"},xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 511.999 511.999",xmlSpace:"preserve",...t},m.createElement("path",{style:{fill:"currentColor"},d:"M103.919,51.744c0,0,41.296,33.496,109.008,18.4c64.2-14.264,124.056-30.464,224.616,5.856v215.032 c0,0-92.488-44.104-176.736-24.432s-131.88,12.12-156.888-12.888"}),m.createElement("rect",{x:90.74,y:37.524,style:{fill:"#999999"},width:16,height:474.475}),m.createElement("circle",{style:{fill:"#666666"},cx:98.741,cy:24.284,r:24.284}));function de(t,a){const[l,r]=Q(t,a.start,a.end);return{start:l,end:r}}function ce(t,a){const{start:l,end:r}=de(a==null?void 0:a.in,t);let s=+l>+r;const d=s?+l:+r,n=s?r:l;n.setHours(0,0,0,0);let o=1;const i=[];for(;+n<=d;)i.push(J(l,n)),n.setDate(n.getDate()+o),n.setHours(0,0,0,0);return s?i.reverse():i}function me({rows:t=5,columns:a=8,className:l,headerRowClassName:r,headerCellClassName:s,dataRowClassName:d,dataCellClassName:n,...o}){const i=Array.from({length:a}),f=Array.from({length:t}),x={gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`};return e.jsxs("div",{className:h("w-full bg-white dark:bg-gray-900",l),...o,children:[e.jsx("div",{className:h("grid border-b border-gray-300 dark:border-gray-600",r),style:x,children:i.map((v,u)=>e.jsx("div",{className:h("px-3 py-2 pe-9",s),children:e.jsx(O,{className:"h-4 w-full rounded",level:3})},u))}),f.map((v,u)=>e.jsx("div",{className:h("grid border-b border-gray-200 dark:border-gray-700 last:border-0",d),style:x,children:i.map((N,C)=>e.jsx("div",{className:h("px-3 py-3.5",n),children:e.jsx(O,{className:"h-3 w-full rounded"})},C))},u))]})}function Le(t){const a=new Date;return t.map(l=>{var w,y,k;const r=M(l.createdDate),s=M(l.closedDate),d=R(s??a,r),n=S(d),{firstCommitDate:o,firstActivityDate:i,approveDate:f}=l.properties.cycleTime,x=S(R(r,M(o)));let v=0;l.state==="MERGED"&&s&&(v=S(R(s,r)));const u=S(R(M(f),r)),N=S(R(M(i),r)),C=l.reviewers.length,B=l.reviewers.filter(j=>j.approved).length,A=l.properties.commentCount,b=l.reviewers.reduce((j,D)=>(j[D.user.name]=D,j),{});return{pr:l,prId:l.id,title:l.title,exactDaysOpen:d,daysOpen:n,daysFromFirstCommitToCreation:x,daysFromCreationToMerge:v,daysFromCreationToApproval:u,reviewers:b,reviewerCount:C,reviewersApproved:B,commentCount:A,daysFromCreationToFirstActivity:N,state:l.state,created:l.createdDate,closed:l.closedDate,url:(k=(y=(w=l.links)==null?void 0:w.self)==null?void 0:y[0])==null?void 0:k.href}})}const ue=({columns:t,rows:a,noRowsMessage:l,onRowClick:r})=>e.jsx("tbody",{children:a.length===0?e.jsx("tr",{className:"border-b border-gray-200",children:e.jsx("td",{className:"px-4 py-2 text-center",colSpan:t.length,children:l||"No records found."})}):a.map((s,d)=>e.jsx("tr",{className:h("border-b border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",r?"cursor-pointer":""),onClick:r?n=>r({row:s,index:d,event:n}):void 0,children:t.map((n,o)=>{const i=n.template?n.template(s):_(s,n.field),f=typeof i=="string"||typeof i=="number"?i:"";return e.jsx("td",{className:h("text-sm px-4 py-2 truncate text-ellipsis",{hidden:!!n.hideBelow,"xs:table-cell":n.hideBelow==="xs","sm:table-cell":n.hideBelow==="sm","md:table-cell":n.hideBelow==="md","mlg:table-cell":n.hideBelow==="mlg","lg:table-cell":n.hideBelow==="lg","xl:table-cell":n.hideBelow==="xl","2xl:table-cell":n.hideBelow==="2xl","3xl:table-cell":n.hideBelow==="3xl"},n.cellClassName),title:f.toString(),children:i},o)})},d))});function xe({label:t,iconLeft:a,iconRight:l,children:r,className:s,...d}){const n=e.jsxs(e.Fragment,{children:[!!a&&e.jsx(a,{className:"absolute left-2 top-1/2 transform -translate-y-1/2"}),r,!!l&&e.jsx(l,{className:"absolute right-2 top-1/2 transform -translate-y-1/2"})]});return e.jsxs("div",{className:h("relative w-full ",s,{"border border-gray-300 rounded min-h-[30px] pt-[1px]":!t,"rounded-[8px] min-h-[55px]":!!t}),...d,children:[!t&&n,!!t&&e.jsxs("fieldset",{className:"relative border rounded-[8px] h-full w-full bg-white",children:[e.jsx("legend",{className:"text-labelBlue font-bold text-13px ms-3 px-1",children:t}),n]})]})}function he({label:t,placeholder:a="Choose here...",options:l=[],showFilter:r=l.length>10,showClear:s=!0,onChange:d,value:n,className:o}){const[i,f]=m.useState(!1),[x,v]=m.useState(""),[u,N]=m.useState(-1),[C,B]=m.useState(null),A=m.useRef(null),b=m.useRef(null),T=m.useRef(null),w=x?l.filter(c=>c.label.toString().toLowerCase().includes(x.toLowerCase())):l,y=l.find(c=>c.value===n),k=()=>f(c=>!c),j=()=>{f(!1),v(""),N(-1)},D=c=>{d(c.value),j()},H=c=>{c.stopPropagation(),d(null)},F=()=>{if(A.current){const c=A.current.getBoundingClientRect(),p=200,g=window.innerHeight-c.bottom,E=c.top,I=g<p&&E>p,Y=window.innerWidth<=640?window.innerWidth*.9:c.width,Z=window.innerWidth<=640?window.innerHeight*.8:I?E:g;B({top:I?c.top-(I?p:0)+window.scrollY:c.bottom+window.scrollY,left:window.innerWidth<=640?window.innerWidth*.05:c.left+window.scrollX,maxHeight:Z,width:Y,dropUp:I})}};m.useEffect(()=>{const c=p=>{A.current&&!A.current.contains(p.target)&&b.current&&!b.current.contains(p.target)&&j()};return i?(document.addEventListener("mousedown",c),F(),N(-1)):(document.removeEventListener("mousedown",c),v("")),()=>{document.removeEventListener("mousedown",c)}},[i]),m.useEffect(()=>{const c=()=>{i&&F()};return window.addEventListener("resize",c),window.addEventListener("scroll",c,!0),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c,!0)}},[i]),m.useEffect(()=>{i&&T.current&&T.current.focus()},[i,r]),m.useEffect(()=>{if(u>=0&&b.current){const p=b.current.children[u];p&&p.scrollIntoView({block:"nearest"})}},[u]);const W=c=>{if(!i){(c.key==="ArrowDown"||c.key==="Enter")&&(f(!0),c.preventDefault());return}switch(c.key){case"ArrowDown":N(p=>Math.min(p+1,w.length-1)),c.preventDefault();break;case"ArrowUp":N(p=>Math.max(p-1,0)),c.preventDefault();break;case"Enter":u>=0&&u<w.length&&D(w[u]),c.preventDefault();break;case"Escape":j(),c.preventDefault();break}},L=e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:A,className:h("h-full flex items-center justify-between cursor-pointer mt-[-4px]",o),onClick:k,onKeyDown:W,tabIndex:0,"aria-haspopup":"listbox","aria-expanded":i,children:[e.jsx("span",{className:h("flex-1 px-4 text-sm",y?"text-black":"text-pBlack"),children:y?y.label:a}),s&&!!n&&e.jsx("button",{onClick:H,className:"ml-2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":"Clear selection",children:"×"}),e.jsx("div",{className:"w-0 h-0 me-3 border-t-[6px] border-b-0 border-l-[3.5px] border-r-[3.5px] border-transparent border-t-labelBlue"})]}),i&&C&&ee.createPortal(e.jsxs("div",{className:h("absolute z-50 bg-white border border-gray-300 rounded shadow-lg",window.innerWidth<=640?"fixed top-0 left-0 right-0 bottom-0 m-auto":""),style:{top:window.innerWidth<=640?"10%":C.top,left:window.innerWidth<=640?"5%":C.left,width:window.innerWidth<=640?"90%":C.width,maxHeight:window.innerWidth<=640?"80%":C.maxHeight,overflow:"auto"},role:"listbox","aria-activedescendant":u>=0?`selectbox-option-${u}`:void 0,children:[r&&e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("input",{ref:T,type:"text",value:x,onChange:c=>v(c.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring bg-white",placeholder:"Filter...",onKeyDown:c=>c.stopPropagation(),"aria-label":"Filter options"})}),e.jsx("div",{className:"max-h-60 overflow-auto",ref:b,role:"presentation",children:w.length>0?w.map((c,p)=>e.jsx("div",{id:`selectbox-option-${p}`,onClick:()=>D(c),onMouseEnter:()=>N(p),className:h("px-4 py-2 cursor-pointer text-black text-xs",(y==null?void 0:y.value)===c.value?"bg-blue-500 text-white":"",u===p?"bg-gray-200":"","border-b border-gray-100 last:border-b-0"),role:"option","aria-selected":(y==null?void 0:y.value)===c.value,children:c.label},c.value)):e.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No options found"})})]}),document.body)]});return t?e.jsx(xe,{label:t,children:L}):L}function fe({columns:t,rowsCount:a,pageIndex:l,totalPages:r,rowsCounts:s,onChangeCount:d,onNavigate:n}){const o=s.map(i=>({label:i,value:i}));return e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:t.length,children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"Rows per page"}),e.jsx(he,{className:"border border-gray-300 rounded px-2 py-1",value:a,options:o,showClear:!1,onChange:d})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(1),disabled:l===1,children:"«"}),e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(l-1),disabled:l===1,children:"‹"}),e.jsxs("span",{className:"px-2 text-sm font-medium",children:[l," of ",r||1]}),e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(l+1),disabled:l>=r||!r,children:"›"}),e.jsx("button",{className:"font-bold text-2xl disabled:text-[#695A5A]",onClick:()=>n(r),disabled:l>=r||!r,children:"»"})]})]})})})})}const pe=({columns:t,sortColumn:a,sortAsc:l,onSort:r})=>e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-300",children:t.map((s,d)=>{const n=s.sortable&&(a==null?void 0:a.field)===s.field;return e.jsxs("th",{title:s.helpText,className:h("px-4 py-2 font-semibold text-sm text-gray-800 dark:text-gray-100 select-none",{"cursor-pointer":s.sortable,hidden:!!s.hideBelow,"xs:table-cell":s.hideBelow==="xs","sm:table-cell":s.hideBelow==="sm","md:table-cell":s.hideBelow==="md","mlg:table-cell":s.hideBelow==="mlg","lg:table-cell":s.hideBelow==="lg","xl:table-cell":s.hideBelow==="xl","2xl:table-cell":s.hideBelow==="2xl","3xl:table-cell":s.hideBelow==="3xl"},s.headerClassName),onClick:()=>r(s),children:[s.title,n&&e.jsx("span",{className:"ml-1",children:l?"↓":"↑"})]},d)})})});function be(t,a,l=!0,r){return m.useMemo(()=>!r||!a||!(t!=null&&t.length)?t:[...t].sort((s,d)=>{const n=_(s,a),o=_(d,a);if(P(n)&&P(o))return 0;if(P(n))return l?-1:1;if(P(o))return l?1:-1;let i=0;if(typeof n=="number"&&typeof o=="number")i=n-o;else if(n instanceof Date&&o instanceof Date)i=n.getTime()-o.getTime();else{const f=String(n).toLowerCase(),x=String(o).toLowerCase();f<x?i=-1:f>x?i=1:i=0}return l?i:-i}),[t,a,l,r])}const ge=[10,20,25,50,75,100];function ve({id:t,isLoading:a,expectedRows:l,columns:r,rows:s,totalRows:d,page:n,sortColumn:o,sortAsc:i,onSort:f,onChange:x,noRowsMessage:v,rowsPerPage:u,rowCounts:N=ge,pagination:C,containerClassName:B,onRowClick:A}){const[b,T]=m.useState(o),[w,y]=m.useState(i??!0),[k,j]=m.useState(n||1),[D,H]=m.useState(u??N[0]),F=Math.ceil(d/D),W=be(s,b==null?void 0:b.field,w,d===(s==null?void 0:s.length));if(a)return e.jsx(me,{columns:r==null?void 0:r.length,rows:l});const L=g=>{if(!g.sortable)return;let E=!0;b&&b.field===g.field&&(E=!w),T(g),y(E),f&&f(g,E),x&&x({sortColumn:g,sortAsc:E,count:D,pageNumber:k})},c=g=>{H(g),j(1),x&&x({sortColumn:b||void 0,sortAsc:w,count:g,pageNumber:1})},p=g=>{g<1||g>F||(j(g),x&&x({sortColumn:b||void 0,sortAsc:w,count:D,pageNumber:g}))};return e.jsx("div",{id:t,className:h("overflow-auto",B),children:e.jsxs("table",{className:"min-w-full bg-white dark:bg-gray-900 dark:text-gray-200 rounded shadow border border-gray-100",children:[e.jsx(pe,{columns:r,sortColumn:b,sortAsc:w,onSort:L}),e.jsx(ue,{columns:r,rows:W,noRowsMessage:v,onRowClick:A}),C!==!1&&e.jsx(fe,{columns:r,pageIndex:k,rowsCount:D,rowsCounts:N,totalPages:F,onChangeCount:c,onNavigate:p})]})})}function X({pr:t,state:a=t==null?void 0:t.state}){return e.jsx("span",{className:h("px-2 py-1 text-xs rounded text-white",{"bg-green-500":a==="MERGED","bg-red-500":a==="DECLINED","bg-blue-500":a!=="MERGED"&&a!=="DECLINED"}),children:a||"Unknown"})}const Ie=[{field:"prId",title:"PR Id",helpText:"Unique id of current PR",headerClassName:h("text-left"),template:t=>t.url?e.jsxs(q,{href:t.url,children:["#",t.prId]}):t.prId},{field:"title",title:"Title",cellClassName:h("max-w-[500px]"),headerClassName:h("max-w-[500px] text-left")},{field:"state",title:"State",sortable:!0,helpText:"The current state of the PR",cellClassName:"text-center",headerClassName:"text-center",template:t=>e.jsx(X,{pr:t})},{field:"created",title:"Created",sortable:!0,helpText:"Date when this PR was created",cellClassName:"text-center",headerClassName:"text-center",template:t=>$(t.created)},{field:"closed",title:"Closed",sortable:!0,helpText:"Date when this PR was Closed / Declined",cellClassName:"text-center",headerClassName:"text-center",template:t=>t.closed?$(t.closed):null},{field:"daysOpen",title:"Age",sortable:!0,helpText:"Number of days the PR was open before either it is merged or declined",cellClassName:"text-center",headerClassName:"text-center"},{field:"daysFromFirstCommitToCreation",title:"Lag",sortable:!0,helpText:"Number of days it took for the user to raise PR after the first commit was created",cellClassName:"text-center",headerClassName:"text-center"},{field:"daysFromCreationToApproval",title:"Approval Lag",sortable:!0,helpText:"Number of days it took to get the Approval",cellClassName:"text-center",headerClassName:"text-center"},{field:"reviewerCount",title:"Reviewers",sortable:!0,helpText:"Number of reviewers added to PR",cellClassName:"text-center",headerClassName:"text-center"},{field:"reviewersApproved",title:"Approvals",sortable:!0,helpText:"Number of reviewers approving the PR",cellClassName:"text-center",headerClassName:"text-center"},{field:"commentCount",title:"Comments",sortable:!0,helpText:"Number of comments in the PR. This includes responses to comments as well",cellClassName:"text-center",headerClassName:"text-center"},{field:"daysFromCreationToFirstActivity",title:"Activity Lag",sortable:!0,helpText:"Number of days it took for first activity to happen in the PR.",cellClassName:"text-center",headerClassName:"text-center"}];function we({legendsCount:t,legendPosition:a,doughnut:l,containerClassName:r}){const s=!!t&&e.jsx(ne,{count:t,position:a}),d=a=="top"||a==="bottom";return e.jsxs("div",{className:h("flex justify-center",{"flex-col gap-5":d,"gap-3":!d},r),children:[(a=="top"||a==="left")&&s,e.jsx("div",{className:"size-[360px] rounded-full",children:e.jsx(O,{className:"h-full rounded-full",children:!!l&&e.jsx("div",{className:"absolute inset-0 rounded-full m-auto size-[200px] bg-white"})})}),(a=="right"||a==="bottom")&&s]})}const ye=[{field:"date",title:"Date",sortable:!0,headerClassName:"text-left",cellClassName:"text-left"},{field:"comments",title:"Comments",sortable:!0,headerClassName:"text-center",cellClassName:"text-center"},{field:"approvals",title:"Approvals",sortable:!0,headerClassName:"text-center",cellClassName:"text-center"},{field:"rescoped",title:"Commits",sortable:!0,headerClassName:"text-center",cellClassName:"text-center"}];async function Ne(t){const{$repository:a}=te("RepositoryService"),{project:l,repository:r}=se.getState(),s=t.activities||await a.getPullRequestActivity(l==null?void 0:l.key,r==null?void 0:r.slug,t.id),d=Ce(s,t),n=De(d),o=Ae(s),i=ke(s,d,t);return{stackedChart:n,reviewerChart:o,metrics:i,dailyMetrics:d.dailyData}}function Ce(t,a){const l=je(t,a),r=le(Object.keys(l));let s=0;const d=r.map(o=>{const i=l[o],f=i.filter(u=>u.action==="COMMENTED").length,x=i.filter(u=>u.action==="APPROVED").length,v=i.filter(u=>u.action==="RESCOPED").length;return s+=f,{date:o,comments:f,rescoped:v,approvals:x}});let n=0;return r.length&&(n=Object.values(l).filter(o=>!o.length).length),{labels:r,dailyData:d,totalComments:s,idleDays:n}}function je(t,a){const{createdDate:l,closedDate:r}=a,s=ce({start:l,end:r||new Date}).reduce((d,n)=>(d[V(n,"yyyy-MM-dd")]=[],d),{});return t.reduce((d,n)=>{const o=V(n.createdDate,"yyyy-MM-dd");return d[o]||(d[o]=[]),d[o].push(n),d},s)}function De(t){const a=t.labels,l=t.dailyData.map(o=>o.comments),r=t.dailyData.map(o=>o.approvals),s=t.dailyData.map(o=>o.rescoped),d={labels:a,datasets:[l.some(o=>!!o)&&{type:"bar",label:"Comments",data:l,backgroundColor:"#007BFF",stack:"Activity"},r.some(o=>!!o)&&{type:"bar",label:"Approvals",data:r,backgroundColor:"#4CAF50",stack:"Activity"},s.some(o=>!!o)&&{type:"bar",label:"Commits",data:s,backgroundColor:"#FF9800",stack:"Activity"}].filter(Boolean)},n={...G(),plugins:{tooltip:{mode:"index",intersect:!1},legend:{display:!0}},scales:{x:{stacked:!0},y:{stacked:!0,title:{display:!1,text:"Count"},ticks:{beginAtZero:!0}}}};return{data:d,options:n}}function Ae(t){const a={};t.forEach(o=>{if(o.action==="COMMENTED"&&o.user){const i=o.user.displayName||o.user.name||"Unknown";a[i]=(a[i]||0)+1}});const l=Object.keys(a),r=l.map(o=>a[o]),s=l.map((o,i)=>`hsl(${i*50%360}, 70%, 60%)`),d={labels:l,datasets:[{label:"Comments Count",data:r,backgroundColor:s}]},n={...G(),maintainAspectRatio:!0,plugins:{legend:{position:"right"}}};return{data:d,options:n}}function ke(t,a,l){let r=null,s=null;t.forEach(o=>{o.action==="APPROVED"&&((!r||o.createdDate.getTime()<r.getTime())&&(r=o.createdDate),(!s||o.createdDate.getTime()>s.getTime())&&(s=o.createdDate))});let d="N/A";if(r&&s){const o=R(s,r);o>0&&(d=S(o)+" days")}let n="N/A";if(r){let o=null;l.state!=="MERGED"?o=new Date:o=l.closedDate,o&&(n=S(R(o,r))+" days")}return{idleDays:a.idleDays,daysOpenAfterApproval:n,approvalLag:d,totalComments:a.totalComments}}const Ee="PR description is unavailable or is too short";function Re(t){const a=(t==null?void 0:t.trim().length)||0;return a>=200?"":a>=175?"#FFFACD":a>=130?"#FFD700":a>=95?"#FFA500":a>=50?"#FF5722":"#E21B1B"}function Se(t){const[a,l]=m.useState(U());return m.useEffect(()=>{const r=()=>l(U());return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),m.useEffect(()=>{t&&l(U())},[t]),a}function U(){return Math.random().toString(36).substring(2,9)}function Pe({pr:t,url:a,className:l,onBackClick:r}){const[s,d]=m.useState(null),[n,o]=m.useState(!1),[i,f]=m.useState(null),x=m.useRef(null);m.useEffect(()=>{var u;t&&(f(Re(t.description)),o(!0),(u=x.current)==null||u.scrollIntoView({behavior:"smooth"}),Ne(t).then(N=>d(N)).finally(()=>o(!1)))},[t]);const v=e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-900 shadow rounded-lg flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("h3",{className:"text-lg font-bold flex gap-3 cursor-pointer",ref:x,children:[!!r&&e.jsx(ae,{variant:"plain",leftIcon:re,onClick:r}),e.jsxs(q,{href:a,newTab:!0,children:["#",t.id]}),t.title,!!i&&e.jsx("span",{title:Ee,children:e.jsx(ie,{className:"size-6 mr-2",style:{color:i}})})]})}),e.jsxs("div",{className:"flex flex-col sm:items-end",children:[e.jsxs("p",{className:"text-sm",children:["Created: ",t.createdDate?V(t.createdDate,"PPP"):"N/A"]}),e.jsxs("p",{children:[e.jsx(X,{pr:t}),t.state==="MERGED"&&e.jsxs("span",{className:"text-xs ms-2",children:["(",V(t.closedDate,"PPP"),")"]})]})]})]});return e.jsxs("div",{className:h("dark:text-gray-200",l),children:[v,e.jsxs("div",{className:"animate-fadeIn flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex flex-col flex-1 shadow-lg rounded-lg p-4 bg-white dark:bg-gray-900 max-h-[440px] lg:max-w-1/2",children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Daily Activity Overview"}),e.jsxs("div",{className:"w-full h-[370px]",children:[n&&e.jsx(oe,{barWidth:80,count:14,legendsCount:4,order:"random",className:"h-[370px]"}),!n&&s&&e.jsx(K,{type:"bar",data:s.stackedChart.data,options:s.stackedChart.options,width:"100%",height:370})]})]}),e.jsx(Te,{isLoading:n,data:s==null?void 0:s.reviewerChart})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 flex-1 grid grid-cols-1 md:grid-cols-2 gap-4 shadow-lg rounded-lg p-4",children:[e.jsx(z,{isLoading:n,className:"bg-green-100 dark:bg-green-900",label:"Total Idle Days",value:s==null?void 0:s.metrics.idleDays}),e.jsx(z,{isLoading:n,className:"bg-yellow-100 dark:bg-yellow-900",label:"Days Open After Approval",value:s==null?void 0:s.metrics.daysOpenAfterApproval}),e.jsx(z,{isLoading:n,className:"bg-red-100 dark:bg-red-900",label:"Approval Lag (First vs Last)",value:s==null?void 0:s.metrics.approvalLag}),e.jsx(z,{isLoading:n,className:"bg-blue-100 dark:bg-blue-900",label:"Total Comments",value:s==null?void 0:s.metrics.totalComments})]}),e.jsxs("div",{className:"flex-1 shadow-lg rounded-lg p-4 bg-white dark:bg-gray-900 max-h-[400px] overflow-auto",children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Daily Metrics Details"}),e.jsx(ve,{isLoading:n,containerClassName:"w-full",columns:ye,rows:(s==null?void 0:s.dailyMetrics)||[],noRowsMessage:"No details available",totalRows:(s==null?void 0:s.dailyMetrics.length)||0,pagination:!1})]})]})]})]})}function Te({isLoading:t,data:a}){const l=Se(a);return e.jsxs("div",{className:"flex flex-col flex-1 shadow-lg rounded-lg p-4 bg-white dark:bg-gray-900 max-h-[440px] lg:max-w-1/2",children:[e.jsx("h4",{className:"text-lg font-bold mb-2",children:"Reviewer Wise Comments"}),e.jsxs("div",{className:"w-full h-[370px]",children:[t&&e.jsx(we,{legendsCount:4,legendPosition:"right",className:"h-[370px]",doughnut:!0}),!t&&a&&e.jsx(K,{className:"mx-auto w-full max-h-[370px]",type:"doughnut",data:a.data,options:a.options,height:370},l)]})]})}function z({isLoading:t,className:a,label:l,value:r}){return t?e.jsx(O,{level:1}):e.jsxs("div",{className:h("p-4 bg-green-100 rounded-lg shadow",a),children:[e.jsx("h4",{className:"font-bold",children:l}),e.jsx("p",{className:"text-2xl",children:r})]})}export{X as P,Me as S,ve as T,Pe as a,Ie as b,Re as e,Le as g,Ee as p};
